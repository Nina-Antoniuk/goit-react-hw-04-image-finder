{"version":3,"sources":["components/ImageGalleryItem/ImageGalleryItem.module.css","components/Modal/Modal.module.css","components/Button/Button.module.css","components/Searchbar/SearchBar.module.css","components/ImageGallery/ImageGallery.module.css","components/Searchbar/Searchbar.js","services/pixabay.js","components/ImageGalleryItem/ImageGalleryItem.js","components/Button/Button.js","components/Modal/Modal.js","components/ImageGallery/ImageGallery.js","App.js","index.js"],"names":["module","exports","Searchbar","onSubmit","useState","searchValue","setSearchValue","reset","className","s","SearchForm","e","preventDefault","type","SearchFormButton","SearchFormButtonLabel","SearchFormInput","autoComplete","autoFocus","placeholder","value","onChange","target","FetchPhotos","base_url","api_key","this","_searchQuery","_page","newPage","a","axios","defaults","baseURL","get","searchQuery","page","response","data","toast","error","toastId","uuid","ImageGalleryItem","openModal","getImage","largeImage","preiew","desc","onClick","ImageGalleryItemImage","src","alt","default","Button","loadMore","Modal","switcher","children","useEffect","window","addEventListener","handleEscape","removeEventListener","key","createPortal","Overlay","currentTarget","document","getElementById","newFetchPhotos","ImageGallery","searchResults","setSearchResults","status","setStatus","setError","showModal","setShowModal","activeImage","setActiveImage","fetchPhotos","then","result","hits","catch","err","toggleModal","getTarget","dataset","source","info","color","height","width","length","map","id","webformatURL","largeImageURL","tags","scrollTo","top","documentElement","scrollHeight","behavior","modalImage","App","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.5b9fec29.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__3OXkF\",\"ImageGalleryItemImage\":\"ImageGalleryItem_ImageGalleryItemImage__3KlIX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__jQJOg\",\"Modal\":\"Modal_Modal__3vLRZ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__Mx0tE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"SearchBar_Searchbar__1v6GN\",\"SearchForm\":\"SearchBar_SearchForm__r4k36\",\"SearchFormButton\":\"SearchBar_SearchFormButton__3jvRL\",\"SearchFormButtonLabel\":\"SearchBar_SearchFormButtonLabel__3OpLy\",\"SearchFormInput\":\"SearchBar_SearchFormInput__21nAq\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__3__2M\",\"info\":\"ImageGallery_info__21IqI\",\"modalImage\":\"ImageGallery_modalImage__16itv\"};","import { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport s from './SearchBar.module.css';\n\nfunction Searchbar({ onSubmit }) {\n  const [searchValue, setSearchValue] = useState('');\n\n  const getSearchValue = e => {\n    setSearchValue(e.target.value);\n  };\n\n  const submitSearchValue = e => {\n    e.preventDefault();\n\n    onSubmit(searchValue);\n    reset();\n  };\n\n  const reset = () => {\n    setSearchValue('');\n  };\n\n  return (\n    <header className={s.Searchbar}>\n      <form className={s.SearchForm} onSubmit={submitSearchValue}>\n        <button type=\"submit\" className={s.SearchFormButton}>\n          <span className={s.SearchFormButtonLabel}>Search</span>\n        </button>\n        <input\n          className={s.SearchFormInput}\n          type=\"text\"\n          autoComplete=\"off\"\n          autoFocus\n          placeholder=\"Search images and photos\"\n          value={searchValue}\n          onChange={getSearchValue}\n        />\n      </form>\n    </header>\n  );\n}\n\nSearchbar.propTypes = {\n  onSubmit: PropTypes.func,\n};\n\nexport default Searchbar;\n","import axios from 'axios';\nimport { toast } from 'react-toastify';\nimport { v1 as uuid } from 'uuid';\n\nclass FetchPhotos {\n  constructor(base_url, api_key) {\n    this.base_url = base_url;\n    this.api_key = api_key;\n    this._searchQuery = '';\n    this._page = 1;\n  }\n\n  get searchQuery() {\n    return this._searchQuery;\n  }\n\n  set searchQuery(value) {\n    return (this._searchQuery = value);\n  }\n\n  get page() {\n    return this._page;\n  }\n\n  set page(newPage) {\n    return (this._page = newPage);\n  }\n\n  async fetchPhotos() {\n    axios.defaults.baseURL = this.base_url;\n    try {\n      const response = await axios.get(\n        `?key=${this.api_key}&q=${this.searchQuery}&image_type=photo&orientation=horizontal&page=${this.page}&per_page=12`,\n      );\n      return response.data;\n    } catch (err) {\n      return toast.error(`Something went wrong  ${err}`, { toastId: uuid() });\n    }\n  }\n}\n\nexport default FetchPhotos;\n","import PropTypes from 'prop-types';\nimport s from './ImageGalleryItem.module.css';\n\nfunction ImageGalleryItem({ openModal, getImage, largeImage, preiew, desc }) {\n  function onItemClick(e) {\n    openModal();\n    getImage(e);\n  }\n\n  return (\n    <li className={s.ImageGalleryItem} onClick={onItemClick}>\n      <img\n        className={s.ImageGalleryItemImage}\n        src={preiew}\n        data-source={largeImage}\n        alt={desc}\n      />\n    </li>\n  );\n}\n\nImageGalleryItem.default = {\n  preiew:\n    'https://dummyimage.com/280x150/2a2a2a/ffffff&text=Product+image+placeholder',\n  largeImage:\n    'https://dummyimage.com/640x480/2a2a2a/ffffff&text=Product+image+placeholder',\n};\n\nImageGalleryItem.propTypes = {\n  openModal: PropTypes.func,\n  getImage: PropTypes.func,\n  largeImage: PropTypes.string,\n  preiew: PropTypes.string,\n  desc: PropTypes.string,\n};\n\nexport default ImageGalleryItem;\n","import PropTypes from 'prop-types';\nimport s from './Button.module.css';\n\nfunction Button({ loadMore }) {\n  return (\n    <button className={s.Button} type=\"button\" onClick={loadMore}>\n      Load more\n    </button>\n  );\n}\n\nButton.propTypes = {\n  loadMore: PropTypes.func,\n};\n\nexport default Button;\n","import { useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { createPortal } from 'react-dom';\nimport s from './Modal.module.css';\n\nfunction Modal({ switcher, children }) {\n  useEffect(() => {\n    window.addEventListener('keydown', handleEscape);\n    return () => {\n      window.removeEventListener('keydown', handleEscape);\n    };\n  });\n\n  const handleEscape = e => {\n    if (e.key === 'Escape') {\n      switcher();\n    }\n  };\n  const handleClose = e => {\n    if (e.currentTarget === e.target) {\n      switcher();\n    }\n  };\n\n  return createPortal(\n    <div className={s.Overlay} onClick={handleClose}>\n      <div className={s.Modal}>{children}</div>\n    </div>,\n    document.getElementById('modalRoot'),\n  );\n}\n\nModal.propTypes = {\n  switcher: PropTypes.func,\n  children: PropTypes.element,\n};\n\nexport default Modal;\n","import { useState, useEffect } from 'react';\nimport Loader from 'react-loader-spinner';\nimport PropTypes from 'prop-types';\nimport s from './ImageGallery.module.css';\nimport FetchPhotos from '../../services/pixabay';\nimport ImageGalleryItem from '../ImageGalleryItem';\nimport Button from '../Button';\nimport Modal from '../Modal';\n\nconst newFetchPhotos = new FetchPhotos(\n  'https://pixabay.com/api/',\n  '23078743-735eb07845251e1f6bfe1c97b',\n);\n\nfunction ImageGallery({ searchValue }) {\n  const [searchResults, setSearchResults] = useState([]);\n  const [status, setStatus] = useState('init');\n  const [error, setError] = useState(null);\n  const [showModal, setShowModal] = useState(false);\n  const [activeImage, setActiveImage] = useState('');\n\n  useEffect(() => {\n    if (!searchValue) {\n      return;\n    }\n    setStatus('pending');\n    newFetchPhotos.page = 1;\n    newFetchPhotos.searchQuery = searchValue;\n    newFetchPhotos\n      .fetchPhotos()\n      .then(result => {\n        setSearchResults(result.hits);\n        setStatus('resolve');\n      })\n      .catch(err => {\n        setStatus('error');\n        setError(err);\n      });\n  }, [searchValue]);\n\n  const loadMore = () => {\n    newFetchPhotos.page += 1;\n    newFetchPhotos.fetchPhotos().then(response => {\n      setSearchResults([...searchResults, ...response.hits]);\n\n      window.scrollTo({\n        top: document.documentElement.scrollHeight,\n        behavior: 'smooth',\n      });\n    });\n  };\n\n  const toggleModal = () => {\n    setShowModal(!showModal);\n  };\n\n  const getTarget = e => {\n    setActiveImage(e.target.dataset.source);\n  };\n\n  if (status === 'init') {\n    return (\n      <div className={s.info}>\n        <b>What shall we look for?</b>\n      </div>\n    );\n  }\n\n  if (status === 'pending') {\n    return <Loader type=\"ThreeDots\" color=\"#3f51b5\" height={100} width={100} />;\n  }\n\n  if (status === 'rejected') {\n    return (\n      <div className={s.info}>\n        <b>Opps, the request was rejected. Try again.</b>\n        <p>{error}</p>\n      </div>\n    );\n  }\n\n  if (status === 'resolve') {\n    if (searchResults.length === 0) {\n      return (\n        <div className={s.info}>\n          <b>Sorry, no matches was found</b>\n        </div>\n      );\n    }\n\n    return (\n      <>\n        <ul className={s.ImageGallery}>\n          {searchResults.map(({ id, webformatURL, largeImageURL, tags }) => {\n            return (\n              <ImageGalleryItem\n                key={id}\n                preiew={webformatURL}\n                largeImage={largeImageURL}\n                openModal={toggleModal}\n                getImage={getTarget}\n                desc={tags}\n              />\n            );\n          })}\n        </ul>\n\n        <Button loadMore={loadMore} />\n\n        {showModal && (\n          <Modal switcher={toggleModal}>\n            <img className={s.modalImage} src={activeImage} alt=\"\" />\n          </Modal>\n        )}\n      </>\n    );\n  }\n}\n\nImageGallery.propTypes = {\n  searchValue: PropTypes.string,\n};\n\nexport default ImageGallery;\n","import 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\nimport { useState } from 'react';\nimport './App.css';\nimport Searchbar from './components/Searchbar';\nimport ImageGallery from './components/ImageGallery';\n\nfunction App() {\n  const [searchValue, setSearchValue] = useState('');\n\n  const handleSubmit = value => {\n    setSearchValue(value);\n  };\n\n  return (\n    <div className=\"App\">\n      <Searchbar onSubmit={handleSubmit} />\n      <ImageGallery searchValue={searchValue} />\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}